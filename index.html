<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Alien Invasion</title>
</head>
<body>
    <section id="buttons">
        <button type="reset" id="start" onclick="startResetGame()">Start</button>
        <button type="button" id="fire" onclick="attackShip()">Fire!</button>
    </section>
    <section id="alienShipContainer">
        <div id="mother-ship" class="alien-ship"></div>
        <div id="defence-ships" class="flex-row alien-ship"></div>
        <div id="attack-ships" class="flex-row alien-ship"></div>
    </section>
    <body>
        <main>
            <script async defer>
                class Ship {
                    constructor(name, hitPoints, cssID, takesDamage) { // constructor
                        this.name = name;  // properties of ship
                        this.hitPoints = hitPoints; 
                        this.cssID = cssID;
                        this.takesDamage = takesDamage;
                    }
                    printShip() { // method that prints a ship
                        const showShip = `<p class="${this.cssID}"> ${this.name} - HP: ${this.hitPoints}</p>`; // variable that output the text
                        document.getElementById(this.cssID).innerHTML += showShip; // 
                    }
                    takeHit() { // method that describes the damage taken
                        this.hitPoints = this.hitPoints-this.takesDamage;
                    }            
                }
                class MotherShip extends Ship { // extensions to the class Ship  
                    constructor(name, hitPoints, cssID, takesDamage) { // extensions to the class Ship
                        super (name, hitPoints, cssID, takesDamage); // extensions to the class Ship
                    }
                }
                class DefenceShip extends Ship { // extensions to the class Ship
                    constructor(name, hitPoints, cssID, takesDamage) { // extensions to the class Ship
                        super (name, hitPoints, cssID, takesDamage); // extensions to the class Ship
                    }
                }
                class AttackShip extends Ship { // extensions to the class Ship
                    constructor(name, hitPoints, cssID, takesDamage) { // extensions to the class Ship
                        super (name, hitPoints, cssID, takesDamage); // extensions to the class Ship
                    }
                }
                let allShips = []; 

                const createShips = () => { 
                    allShips[0] = new MotherShip("Mother Ship", 100, "mother-ship", 9);
                    for (let index = 1; index < 6; index++) {
                        allShips[index] = new DefenceShip("Defence Ship", 80, "defence-ships", 10);
                    }
                    for (let index = 6; index < 14; index++) {
                        allShips[index] = new AttackShip("Attack Ship", 45, "attack-ships", 12);
                    }
                    return allShips;
                }

                const attackShip = () => {
                    const randomShipIndex = Math.floor(Math.random() * allShips.length);
                    allShips[randomShipIndex].takeHit();
                    if (allShips[0].hitPoints <= 0) {
                        allShips=[];
                    }
                    allShips = allShips.filter(ship => ship.hitPoints > 0);
                    printShips();
                }

                const printShips = () => {
                     document.getElementById('mother-ship').innerHTML = "";
                     document.getElementById('attack-ships').innerHTML = "";
                     document.getElementById('defence-ships').innerHTML = "";
                    allShips.forEach(ship => ship.printShip());
                }

                const startResetGame = () => {
                    createShips();
                    printShips();
                }
            </script>
        </main>
    </body>

</html>